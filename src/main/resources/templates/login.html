<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="utf-8"/>

    <title>Backend Ninja - Signin</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>

    <!-- Custom styles for this template -->
    <link th:href="@{/css/login.css}" rel="stylesheet" />
    <link th:href="@{/css/style.css}" rel="stylesheet" />

  </head>

  <body>
    <div class="container">
	  <p style="text-align: right; font-weight: bold" th:if="${authUser}"><span th:text="${authUser.getUsername()}"></span></p>
	  
      <form th:if="${usercheck_flag}" class="form-signin" th:action="@{/login/usercheck}" method="POST">
        <h2 class="form-signin-heading">Sign in</h2>

		<div>
	        <label for="inputUsername" class="sr-only">Username</label>
	        <input type="text" class="form-control" placeholder="Username" name="username"/>
        </div>
		
		<div th:if="${error != null}" class="alert alert-danger" role="alert">Invalid username or password, or code (if it's the case)</div>
        <div th:if="${logout != null}" class="alert alert-info" role="alert">Logout successfully</div>
        <div th:if="${new_user != null}" class="alert alert-info" role="alert"><span th:text="${new_user}"></span> registered successfully</div>
        <div th:if="${message != null}" class="alert alert-info" role="alert"><span th:text="${message}"></span></div>
        
        <button class="btn btn-lg btn-primary btn-block" type="submit">Next</button>
      </form>
      
      <form th:if="${!usercheck_flag}" class="form-signin" th:action="@{/logincheck}" method="POST">
        <h2 class="form-signin-heading">Sign in</h2>

		<div>
	        <label for="inputUsername" class="sr-only">Username</label>
	        <input type="text" class="form-control" placeholder="Username" name="username" 
	        	   th:readonly="${true}" th:value="*{given_username}"/>
        </div>
        
		<div>
	        <label for="inputPassword" class="sr-only">Password</label>
	        <input type="password" class="form-control" placeholder="Password" name="password"/>
        </div>
        
        <div th:if="${code_flag}">
	        <label for="inputCode" class="sr-only">Google Authenticator Verification Code</label>
	        <input type=text class="form-control" placeholder="Code" name="code"/>
		</div>
		
        <div th:if="${error != null}" class="alert alert-danger" role="alert">Invalid username or password, or code (if it's the case)</div>
        <div th:if="${message != null}" class="alert alert-info" role="alert"><span th:text="${message}"></span></div>
                
        <button class="btn btn-lg btn-primary btn-block" type="submit">
        	<span class="glyphicon glyphicon-log-in" aria-hidden="true"></span> Sign in
        </button>
      </form>
      
      <br>
      <form th:action="@{/register/register}" method="GET">
	      <button class="btn btn-lg btn-primary btn-block" style="margin-top: 50px" type="submit">Registrarse</button>
      </form>
    </div>
  </body>
</html>